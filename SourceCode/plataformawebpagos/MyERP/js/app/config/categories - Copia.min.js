"use strict"; let dateMaterials = new Date, descargasMaterials = "CATEGORIAS_" + dateMaterials.getFullYear() + "_" + dateMaterials.getMonth() + "_" + dateMaterials.getUTCDay() + "_" + dateMaterials.getMilliseconds(), paginaMaterials = "202"; const Category = { init: () => { $("#panelTablaMaterials").show(), $("#panelFormMaterials").hide(), Category.idSeleccionado = -1, Category.accion = "", Category.loadContent() }, loadContent() { let n = {}; n.path = window.location.hostname; n.idUsuario = document.getElementById("txtIdUsuario").value; n = JSON.stringify(n); $.ajax({ type: "POST", url: "../../pages/Config/Categories.aspx/GetListaItems", data: n, contentType: "application/json; charset=utf-8", dataType: "json", "async": !0, success: function (n) { let t = n.d; t == null && (window.location = "../../pages/Index.aspx"); let i = $("#tableMaterials").DataTable({ destroy: !0, processing: !0, order: [], data: t, columns: [{ data: "Id" }, { data: "Nombre" }, { data: "EsMaterialEntregaStr" }, { data: "ActivoStr" }, { data: "Accion" }], language: textosEsp, columnDefs: [{ targets: [-1], orderable: !1 },], dom: "frBtipl", buttons: [{ extend: "excelHtml5", title: descargasMaterials, text: "Xls", className: "excelbtn" }, { extend: "pdfHtml5", title: descargasMaterials, text: "Pdf", className: "pdfbtn" }] }) }, error: function (n, t) { console.log(t + ": " + n.responseText) } }) }, "delete": n => { Category.idSeleccionado = n, $("#mensajeEliminarAssets").text(`Se eliminará el registro seleccionado (No. ${n}). ¿Desea continuar ?`), $("#panelEliminarAssets").modal("show") }, edit: n => { $(".form-group").removeClass("has-error"); $(".help-block").empty(); let t = {}; t.path = window.location.hostname; t.id = n; t = JSON.stringify(t); $.ajax({ type: "POST", url: "../../pages/Config/Categories.aspx/GetItem", data: t, contentType: "application/json; charset=utf-8", dataType: "json", "async": !0, success: function (n) { var t = n.d; Category.idSeleccionado = t.Id; $("#txtNombreMaterials").val(t.Nombre); $("#chkActivoMaterials").prop("checked", t.Activo === 1); $("#chkEsMaterialEntregaMaterials").prop("checked", t.EsMaterialEntrega === 1); $("#panelTablaMaterials").hide(); $("#panelFormMaterials").show(); Category.accion = "editar"; $("#spnTituloFormMaterials").text("Editar"); $(".deshabilitable").prop("disabled", !1) }, error: function (n, t) { console.log(t + ": " + n.responseText) } }) }, nuevo: () => { $("#frmMaterials")[0].reset(), $(".form-group").removeClass("has-error"), $(".help-block").empty(), $("#spnTituloFormMaterials").text("Nuevo"), $("#panelTablaMaterials").hide(), $("#panelFormMaterials").show(), Category.accion = "nuevo", Category.idSeleccionado = -1, $(".deshabilitable").prop("disabled", !1) }, accionesBotones: () => { $("#btnNuevoMaterials").on("click", n => { n.preventDefault(), Category.nuevo() }); $("#btnGuardarMaterials").click(function (n) { n.preventDefault(); var t = $('form[name="frmMaterials"]').validator("validate").has(".has-error").length; if (!t) { let t = {}; t.Id = Category.idSeleccionado; t.Nombre = $("#txtNombreMaterials").val(); t.Activo = $("#chkActivoMaterials").prop("checked") ? 1 : 0; t.EsMaterialEntrega = $("#chkEsMaterialEntregaMaterials").prop("checked") ? 1 : 0; let n = {}; n.path = window.location.hostname; n.item = t; n.accion = Category.accion; n.idUsuario = document.getElementById("txtIdUsuario").value; n = JSON.stringify(n); $.ajax({ type: "POST", url: "../../pages/Config/Categories.aspx/Save", data: n, contentType: "application/json; charset=utf-8", dataType: "json", "async": !0, success: function (n) { let t = parseInt(n.d); t > 0 ? (utils.toast(mensajesAlertas.exitoGuardar, "ok"), $("#panelTablaMaterials").show(), $("#panelFormMaterials").hide(), Category.loadContent()) : utils.toast(mensajesAlertas.errorGuardar, "fail"); $("#panelEdicionAssets").modal("hide") }, error: function (n, t) { console.log(t + ": " + n.responseText) } }) } }); $("#btnCancelarMaterials").on("click", n => { n.preventDefault(), $("#panelTablaMaterials").show(), $("#panelFormMaterials").hide() }); $("#btnEliminarAceptarAssets").on("click", () => { let n = {}; n.path = window.location.hostname; n.id = Category.idSeleccionado; n.idUsuario = document.getElementById("txtIdUsuario").value; n = JSON.stringify(n); $.ajax({ type: "POST", url: "../../pages/Config/Categories.aspx/Delete", data: n, contentType: "application/json; charset=utf-8", dataType: "json", "async": !0, success: function (n) { var t = n.d; t.MensajeError === null ? (utils.toast(mensajesAlertas.exitoEliminar, "ok"), Category.loadContent()) : utils.toast(t.MensajeError, "error") }, error: function (n, t) { console.log(t + ": " + n.responseText) } }) }) } }; window.addEventListener("load", () => { Category.init(), Category.accionesBotones() });