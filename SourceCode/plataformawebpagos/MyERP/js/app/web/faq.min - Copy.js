"use strict";let date=new Date,descargas="FAQ_"+date.getFullYear()+"_"+date.getMonth()+"_"+date.getUTCDay()+"_"+date.getMilliseconds(),pagina="2";const faq={init:()=>{$("#panelTabla").show(),$("#panelForm").hide(),faq.idSeleccionado=-1,faq.cargarItems()},cargarItems:()=>{var n={};n.path=window.location.hostname;n.idUsuario=sessionStorage.getItem("idusuario");utils.postData("../pages/FAQ.aspx/GetListaItems",n).then(n=>{console.log(n);n=n.d;let t=$("#table").DataTable({destroy:!0,processing:!0,order:[],data:n,columns:[{data:"Id"},{data:"Pregunta"},{data:"Respuesta"},{data:"ActivoStr"},{data:"Accion"}],language:textosEsp,columnDefs:[{targets:[-1],orderable:!1},],dom:"frtiplB",buttons:[{extend:"excelHtml5",title:descargas,text:"Xls",className:"excelbtn"},{extend:"pdfHtml5",title:descargas,text:"Pdf",className:"pdfbtn"}]})})},eliminar:n=>{faq.idSeleccionado=n,$("#panelEliminar").modal("show")},nuevo:()=>{$("#frm")[0].reset(),$(".form-group").removeClass("has-error"),$(".help-block").empty(),$("#spnTituloForm").text("Nuevo"),$("#txtDescripcion").val(""),$("#panelTabla").hide(),$("#panelForm").show(),faq.accion="nuevo",faq.idSeleccionado=-1,$(".deshabilitable").prop("disabled",!1),obtenerFechaHoraServidor("txtFechaCreacion")},accionesBotones:()=>{$("#btnNuevo").on("click",n=>{n.preventDefault(),faq.nuevo()});$("#btnGuardar").on("click",n=>{var i,r,t;if(n.preventDefault(),i=$('form[name="frm"]').validator("validate").has(".has-error").length,!i){r={};r.IdEmpleado=faq.idSeleccionado;let u=[],f=$("#comboObras").jqxListBox("getCheckedItems");$.each(f,function(){let n={IdObra:this.value,IdResidente:faq.idSeleccionado};u.push(n)});console.table(f);t={};t.path=window.location.hostname;t.idEmpleado=faq.idSeleccionado;t.obras=u;t.accion=faq.accion;t=JSON.stringify(t);$.ajax({type:"POST",url:"../pages/FAQ.aspx/Guardar",data:t,contentType:"application/json; charset=utf-8",dataType:"json","async":!0,success:function(n){var t=n.d;t.CodigoError==0?(utils.toast(mensajesAlertas.exitoGuardar,"ok"),$("#panelTabla").show(),$("#panelForm").hide(),faq.cargarItems()):utils.toast(mensajesAlertas.errorGuardar,"error")},error:function(){utils.toast(mensajesAlertas.errorGuardar,"error")}})}});$("#btnCancelar").on("click",n=>{n.preventDefault(),$("#panelTabla").show(),$("#panelForm").hide()});$("#btnEliminarAceptar").on("click",()=>{var n={};n.path=window.location.hostname;n.id=faq.idSeleccionado;n=JSON.stringify(n);$.ajax({type:"POST",url:"../pages/FAQ.aspx/Eliminar",data:n,contentType:"application/json; charset=utf-8",dataType:"json","async":!0,success:function(n){var t=n.d;t.MensajeError===null?(utils.toast(mensajesAlertas.exitoEliminar,"ok"),faq.cargarItems()):utils.toast(t.MensajeError,"error")},error:function(n,t){console.log(t+": "+n.responseText)}})})}};window.addEventListener("load",()=>{faq.init(),faq.accionesBotones()});