"use strict";let dateAssets=new Date,descargasAssets="CATEGORIAS_"+dateAssets.getFullYear()+"_"+dateAssets.getMonth()+"_"+dateAssets.getUTCDay()+"_"+dateAssets.getMilliseconds(),paginaAssets="45";const Category={init:()=>{$("#panelTablaAssets").show(),$("#panelFormAssets").hide(),Category.idSeleccionado=-1,Category.accion="",Category.loadContent()},loadContent(){let n={};n.path="connbd";n.idUsuario=document.getElementById("txtIdUsuario").value;n=JSON.stringify(n);$.ajax({type:"POST",url:"../../pages/Config/Categories.aspx/GetListaItems",data:n,contentType:"application/json; charset=utf-8",dataType:"json","async":!0,success:function(n){let t=n.d;t==null&&(window.location="../../pages/Index.aspx");let i=$("#tableAssets").DataTable({destroy:!0,processing:!0,order:[],data:t,columns:[{data:"Id"},{data:"Nombre"},{data:"EsMaterialEntregaStr"},{data:"ActivoStr"},{data:"Accion"}],language:textosEsp,columnDefs:[{targets:[-1],orderable:!1},],dom:"frBtipl",buttons:[{extend:"excelHtml5",title:descargasAssets,text:"Xls",className:"excelbtn"},{extend:"pdfHtml5",title:descargasAssets,text:"Pdf",className:"pdfbtn"}]})},error:function(n,t){console.log(t+": "+n.responseText)}})},"delete":n=>{Category.idSeleccionado=n,$("#mensajeEliminarAssets").text(`Se eliminará el registro seleccionado (No. ${n}). ¿Desea continuar ?`),$("#panelEliminarAssets").modal("show")},edit:n=>{$(".form-group").removeClass("has-error");$(".help-block").empty();let t={};t.path="connbd";t.id=n;t=JSON.stringify(t);$.ajax({type:"POST",url:"../../pages/Config/Categories.aspx/GetItem",data:t,contentType:"application/json; charset=utf-8",dataType:"json","async":!0,success:function(n){var t=n.d;Category.idSeleccionado=t.Id;$("#txtNombreAssets").val(t.Nombre);$("#chkActivoAssets").prop("checked",t.Activo===1);$("#chkEsMaterialEntrega").prop("checked",t.EsMaterialEntrega===1);$("#panelTablaAssets").hide();$("#panelFormAssets").show();Category.accion="editar";$("#spnTituloFormAssets").text("Editar");$(".deshabilitable").prop("disabled",!1)},error:function(n,t){console.log(t+": "+n.responseText)}})},nuevo:()=>{$("#frmAssets")[0].reset(),$(".form-group").removeClass("has-error"),$(".help-block").empty(),$("#spnTituloFormAssets").text("Nuevo"),$("#panelTablaAssets").hide(),$("#panelFormAssets").show(),Category.accion="nuevo",Category.idSeleccionado=-1,$(".deshabilitable").prop("disabled",!1)},accionesBotones:()=>{$("#btnNuevoAssets").on("click",n=>{n.preventDefault(),Category.nuevo()});$("#btnGuardarAssets").click(function(n){n.preventDefault();var t=$('form[name="frmAssets"]').validator("validate").has(".has-error").length;if(!t){let t={};t.Id=Category.idSeleccionado;t.Nombre=$("#txtNombreAssets").val();t.Activo=$("#chkActivoAssets").prop("checked")?1:0;t.EsMaterialEntrega=$("#chkEsMaterialEntrega").prop("checked")?1:0;let n={};n.path="connbd";n.item=t;n.accion=Category.accion;n.idUsuario=document.getElementById("txtIdUsuario").value;n=JSON.stringify(n);$.ajax({type:"POST",url:"../../pages/Config/Categories.aspx/Save",data:n,contentType:"application/json; charset=utf-8",dataType:"json","async":!0,success:function(n){let t=parseInt(n.d);t>0?(utils.toast(mensajesAlertas.exitoGuardar,"ok"),$("#panelTablaAssets").show(),$("#panelFormAssets").hide(),Category.loadContent()):utils.toast(mensajesAlertas.errorGuardar,"fail");$("#panelEdicionAssets").modal("hide")},error:function(n,t){console.log(t+": "+n.responseText)}})}});$("#btnCancelarAssets").on("click",n=>{n.preventDefault(),$("#panelTablaAssets").show(),$("#panelFormAssets").hide()});$("#btnEliminarAceptarAssets").on("click",()=>{let n={};n.path="connbd";n.id=Category.idSeleccionado;n.idUsuario=document.getElementById("txtIdUsuario").value;n=JSON.stringify(n);$.ajax({type:"POST",url:"../../pages/Config/Categories.aspx/Delete",data:n,contentType:"application/json; charset=utf-8",dataType:"json","async":!0,success:function(n){var t=n.d;t.MensajeError===null?(utils.toast(mensajesAlertas.exitoEliminar,"ok"),Category.loadContent()):utils.toast(t.MensajeError,"error")},error:function(n,t){console.log(t+": "+n.responseText)}})})}};window.addEventListener("load",()=>{Category.init(),Category.accionesBotones()});