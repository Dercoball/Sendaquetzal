function editar(n){console.log("Desde la funcion editar");console.log("Id "+n);$(".form-group").removeClass("has-error");$(".help-block").empty();var t={};t.path=window.location.hostname;t.id=n;t=JSON.stringify(t);$.ajax({type:"POST",url:"../pages/Proveedores.aspx/GetItem",data:t,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,success:function(n){var t=n.d;$("#txtNombre").val(t.Nombre);$("#txtDomicilio").val(t.Domicilio);$("#txtTelefono").val(t.Telefono);$("#txtCelular").val(t.Celular);$("#txtCorreo").val(t.Correo);idSeleccionado=t.IdProveedor;accion="editar";$("#spnTituloForm").text("Editar");$("#panelTabla").hide();$("#panelForm").show()},error:function(n,t){console.log(t+": "+n.responseText)}})}function eliminar(n){idSeleccionado=n;$(".modal-title").text("Confirmar");$("#panelEliminar").modal("show")}function nuevo(){console.log("Desde nuevo cliente");$("#frm")[0].reset();$(".form-group").removeClass("has-error");$(".help-block").empty();$("#spnTituloForm").text("Nuevo");$("#panelTabla").hide();$("#panelForm").show();accion="nuevo";id="-1"}var accion="",idSeleccionado="-1",table,date=new Date,descargas="Proveedores_"+date.getFullYear()+"_"+date.getMonth()+"_"+date.getUTCDay()+"_"+date.getMilliseconds(),pagina="31";$(document).ready(function(){function n(){var n={};n.path=window.location.hostname;n.idUsuario=sessionStorage.getItem("idusuario");n=JSON.stringify(n);$.ajax({type:"POST",url:"../pages/Proveedores.aspx/GetListaItems",data:n,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,success:function(n){table=$("#table").DataTable({destroy:!0,processing:!0,order:[],data:n.d,columns:[{data:"Nombre"},{data:"Domicilio"},{data:"Telefono"},{data:"Accion"}],language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},columnDefs:[{targets:[-1],orderable:!1},],dom:"frtiplB",buttons:[{extend:"excelHtml5",title:descargas,text:"Xls",className:"excelbtn"},{extend:"pdfHtml5",title:descargas,text:"Pdf",className:"pdfbtn"}]})},error:function(n,t){console.log(t+": "+n.responseText)}})}console.log("Inicializando");$("#alert-operacion-ok").hide();$("#alert-operacion-fail").hide();$("#panelTabla").show();$("#panelForm").hide();n();$("#btnGuardar").click(function(t){var u,i,r;t.preventDefault();u=$('form[name="frm"]').validator("validate").has(".has-error").length;u||(i={},i.IdProveedor=idSeleccionado,i.Nombre=$("#txtNombre").val(),i.Domicilio=$("#txtDomicilio").val(),i.Telefono=$("#txtTelefono").val(),i.Celular=$("#txtCelular").val(),i.Correo=$("#txtCorreo").val(),r={},r.path=window.location.hostname,r.proveedor=i,r.accion=accion,r=JSON.stringify(r),$.ajax({type:"POST",url:"../pages/Proveedores.aspx/Guardar",data:r,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,success:function(t){var i=parseInt(t.d);i>0?($("#lblMensajesOk").text("Registro guardado correctamente..."),$("#alert-operacion-ok").show("fast",function(){setTimeout(function(){$("#alert-operacion-ok").hide("fast")},2e3)}),$("#panelTabla").show(),$("#panelForm").hide(),n()):($("#lblMensajesFail").text("No se pudo guardar el registro..."),$("#alert-operacion-fail").show("fast",function(){setTimeout(function(){$("#alert-operacion-fail").hide("fast")},2e3)}));$("#panelEdicion").modal("hide")},error:function(n,t){console.log(t+": "+n.responseText)}}))});$("#btnCancelar").click(function(n){n.preventDefault();$("#panelTabla").show();$("#panelForm").hide()});$("#btnNuevo").click(function(n){n.preventDefault();nuevo()});$("#btnEliminarAceptar").click(function(){var t={};t.path=window.location.hostname;t.id=idSeleccionado;t=JSON.stringify(t);$.ajax({type:"POST",url:"../pages/Proveedores.aspx/EliminarProveedor",data:t,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,success:function(t){var i=t.d;i>0?($("#lblMensajesOk").text("Registro eliminado correctamente..."),$("#alert-operacion-ok").show("fast",function(){setTimeout(function(){$("#alert-operacion-ok").hide("fast")},2e3)}),table.destroy(),n()):($("#lblMensajesFail").text("No se pudo eliminar el registro..."),$("#alert-operacion-fail").show("fast",function(){setTimeout(function(){$("#alert-operacion-fail").hide("fast")},2e3)}))},error:function(n,t){console.log(t+": "+n.responseText)}})})});