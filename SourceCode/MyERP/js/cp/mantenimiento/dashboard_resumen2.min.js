"use strict";let date=new Date,descargas="Dashboard_"+date.getFullYear()+"_"+date.getMonth()+"_"+date.getUTCDay()+"_"+date.getMilliseconds(),pagina="80";const dashBoard={init:()=>{dashBoard.cargarItems(),dashBoard.obtenerFechaHoraServidor(),dashBoard.scrollTop=100,dashBoard.incremento=100},obtenerFechaHoraServidor:()=>{var n={};n.path=window.location.hostname;n=JSON.stringify(n);$.ajax({type:"POST",url:"../pages/Proyectos.aspx/GetFechaHora",data:n,contentType:"application/json; charset=utf-8",dataType:"json","async":!0,success:function(n){var t=n.d;$("#fechaHora").html(`<h1 class="texto-hora">${t.Hora} Hrs</h1>`)},error:function(n,t){console.log(t+": "+n.responseText)}})},cargarItems:()=>{dashBoard.cargarOtsPorHacer()},cargarOtsPorHacer:()=>{$("#itemsOtsPorHacer").empty().append(`
            <img src = '../img/loading.gif' class='img img-fluid'/>
        `);var n={};n.path=window.location.hostname;n.idUsuario=sessionStorage.getItem("idusuario");n.idTipoUsuario=sessionStorage.getItem("idtipousuario");utils.postData("../pages/MantenimientoDashboard2.aspx/GetListaOtsPorHacer",n).then(n=>{n=n.d;let t="";for(let i=0;i<n.length;i++){let r=n[i],u="border: solid 1px gray;";(i+1)%3==0&&(u="border: solid 1px #2b90d9;");t+=`

                    <div class="col-md-3 h-100">
                        <div class="card ${"bg-light"} mb-3" style="width: 99%!important; ${u}">
                            <div class="card-header" >
                                                    OT<strong>${r.IdRequisicion}</strong> - ${r.NumeroEconomico}
                            </div>
                            <div class="card-body">
                                <div><small>${r.Descripcion}</small></div>
                                <div class="card-title">${r.NombreUbicacion}</div>
                         
                            </div>
                        </div> 
                    </div> `}$("#contenedorItemsPorHacer").css("height",`${$("#contenedorTrabajosEnAtencion").height()}`);$("#itemsOtsPorHacer").empty().append(t).promise().done(()=>{});setInterval(()=>{$("#contenedorItemsPorHacer").animate({scrollTop:dashBoard.scrollTop});dashBoard.scrollTop+=dashBoard.incremento;let n=$("#itemsOtsPorHacer").height();console.log(`scrollTop = ${dashBoard.scrollTop}`);console.log(`itemsOtsPorHacer height ${n}`);console.log(`incremento ${dashBoard.incremento}`);dashBoard.scrollTop>=n&&(dashBoard.incremento=0,console.log(`Reset 0`))},5e3)})},accionesBotones:()=>{}};window.addEventListener("load",()=>{dashBoard.init()});setInterval(()=>{window.location.reload()},3e5);setInterval(()=>{dashBoard.obtenerFechaHoraServidor()},6e4);